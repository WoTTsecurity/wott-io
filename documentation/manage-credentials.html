<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- dynamically fixing the title for tag/author pages -->





    <title>Web of Trusted Things - Getting started with managing credentials with the WoTT Agent and Dashboard</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    	 
	<link rel="stylesheet" type="text/css" href="https://wott.io/assets/style/style.css" />
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta name="description" content="Manage credentials with WoTT" />
	
	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://wott.io/assets/style/favicon/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://wott.io/assets/style/favicon/apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://wott.io/assets/style/favicon/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://wott.io/assets/style/favicon/apple-touch-icon-144x144.png" />
	<link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://wott.io/assets/style/favicon/apple-touch-icon-60x60.png" />
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://wott.io/assets/style/favicon/apple-touch-icon-120x120.png" />
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://wott.io/assets/style/favicon/apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://wott.io/assets/style/favicon/apple-touch-icon-152x152.png" />
	<link rel="icon" type="image/png" href="https://wott.io/assets/style/favicon/favicon-196x196.png" sizes="196x196" />
	<link rel="icon" type="image/png" href="https://wott.io/assets/style/favicon/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/png" href="https://wott.io/assets/style/favicon/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="https://wott.io/assets/style/favicon/favicon-16x16.png" sizes="16x16" />
	<link rel="icon" type="image/png" href="https://wott.io/assets/style/favicon/favicon-128.png" sizes="128x128" />
	<meta name="application-name" content="Web of Trusted Things"/>
	<meta name="msapplication-TileColor" content="#FFFFFF" />
	<meta name="msapplication-TileImage" content="https://wott.io/assets/style/favicon/mstile-144x144.png" />
	<meta name="msapplication-square70x70logo" content="https://wott.io/assets/style/favicon/mstile-70x70.png" />
	<meta name="msapplication-square150x150logo" content="https://wott.io/assets/style/favicon/mstile-150x150.png" />
	<meta name="msapplication-wide310x150logo" content="https://wott.io/assets/style/favicon/mstile-310x150.png" />
	<meta name="msapplication-square310x310logo" content="https://wott.io/assets/style/favicon/mstile-310x310.png" />

    <link rel="canonical" href="https://wott.io/documentation/manage-credentials" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

    <meta property="og:site_name" content="Web of Trusted Things" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Web of Trusted Things - Getting started with managing credentials with the WoTT Agent and Dashboard" />
    <meta property="og:description" content="Manage credentials with WoTT" />
    <meta property="og:url" content="https://wott.io/documentation/manage-credentials" />
	<meta property="og:image" content="https://wott.io/assets/images/blog-cover.jpg">
    <meta property="article:publisher" content="https://www.facebook.com/wott" />
    <meta property="article:author" content="https://www.facebook.com/wott" />
    <meta property="article:published_time" content="" />
    <meta property="article:modified_time" content="" />
 
	<!-- Twitter cards -->
	<meta name="twitter:site" content="@wottsecurity" />
	<meta name="twitter:creator" content="@wottsecurity" />
	<meta name="twitter:title"   content="Web of Trusted Things - Getting started with managing credentials with the WoTT Agent and Dashboard">
	<meta name="twitter:description" content="Manage credentials with WoTT">
	<meta name="twitter:card"  content="summary"><meta name="twitter:image" content="https://wott.io/assets/images/blog-cover.jpg">
	<!-- end of Twitter cards -->
	
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Web of Trusted Things",
        "logo": "https://wott.io/"
    },
    "url": "https://wott.io/documentation/manage-credentials",
    "image": {
        "@type": "ImageObject",
        "url": "https://wott.io/assets/images/blog-cover.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://wott.io/documentation/manage-credentials"
    },
    "description": "Manage credentials with WoTT"
}
    </script>



    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Getting started with managing credentials with the WoTT Agent and Dashboard" href="/feed.xml" />

</head>
<body class="body_docs">
	<div class="search_block"><form action="https://wott.io/search" method="GET"><input id="search_input_mini" type="text" name="s" value="" placeholder="Search for any article or any questions"/><button type="submit">search</button></form><div class="list_s_result" id="search_result_mini"></div></div>
	<div class="left_block" data-open-menu="0" id="docs_menu"><a class="mobile_menu_button"></a><div class="inner_block"><a class="logo_version" href="https://wott.io/"><span class="logo"></span></a></div>	<div class="inner_block">
	<span class="title">Documentation</span>
	<ul class="global_nav">
	<li><a href="https://wott.io/documentation/getting-started">Getting Started</a></li>
	<li><a href="https://wott.io/documentation/manage-credentials">Manage Credentials</a></li>
	<li><a href="https://wott.io/documentation/trust-score">Trust Score</a></li>	
	<li><a href="https://wott.io/documentation/use-cases">Use Cases</a></li>
	<li><a href="https://wott.io/documentation/faq">Frequently Asked Questions</a></li>
	<li><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=41&t=243538" target="_blank">Get Support</a></li>
	</ul>
	</div>

	<div class="inner_block" id="mobile_page_site_menu">
	<span class="title">Site pages</span>
	<ul class="global_nav">
	<li><a href="https://wott.io/product" title="">Product</a></li>
	<li><a href="https://wott.io/about" title="">About us</a></li>
	<li><a href="https://wott.io/pricing" title="">Pricing</a></li>
	<li><a href="https://wott.io/documentation" title="">Documentation</a></li>
	<li><a href="https://wott.io/blog" title="">Blog</a></li>
	</ul>
	</div>

	<!--
	<div class="inner_block">
	<ul class="slider_nav" data-name-nav="Getting Started" id="getting_started">
	<li class="name"><a href="#getting_started" >Getting Started</a></li>
	<li><a href="https://wott.io/documentation/getting_started/test">Sections and outlines in HTML5</a></li>
	</ul>
	</div>
	-->
</div>
    <div class="b_content docs_content">
    <div class="inner-content">
<div class="info_docs">
<span class="t_hm">introduction</span>
<span class="t_i1">Getting started with managing credentials with the WoTT Agent and Dashboard</span>
<span class="t_m2">We'll show you how to manage credentials, and how to easily rotate credentials for your devices using the WoTT dashboard and agent.</span>
</div>
<div class="info_docs content_info_block">
<span class="t_m1">Manage credentials with WoTT</span>
<p>It is unfortunately common that developers “bake in” credentials to both 3rd party services as well as credentials to the actual device into the firmware or software. This is commonly done out of convenience, despite it contradicting best practices. The downside with this however is that it both makes it very easy for an attacker or malicious user to extract this data. What makes matters worse is that these credentials are often shared across the entire fleet of devices. Depending on what type of credentials these are, the attacker could do things such as:</p>

<ul>
  <li>Perform a simple rate limiting attack, meaning that they perform enough requests per minute or hour until the 3rd party service cuts off the access, which then means that none of your other devices can interact with the 3rd party service.</li>
  <li>Inject bogus data or delete your data, which can significantly impact your business operation.</li>
  <li>Use these credentials as a stepping stone as part of a more sophisticated attack, where the attacker can escalate further into your infrastructure.</li>
</ul>

<p>Assuming you as the developer even detect that that these credentials leaked, your only remedy is to issue a firmware update to the entire fleet in order to rotate the credentials. However, even this is a somewhat pointless exercise, as it the attacker can easily repeat the attack to gain access to the new credentials.</p>

<p>Enter WoTT. As per industry best practice dictates, you should never include credentials as part of your code base or firmware. WoTT makes enables you to easily separate out your credentials from the software. In real simple terms, the way it works is that you read the credentials from a JSON file on disk. Because of this separation, WoTT makes it easy to manage the credentials independently from the firmware. Moreover, as part of this separation, WoTT makes it easy to rotate keys across the entire fleet, or to provide unique credentials for every single device.</p>

<h2 id="example-a-shared-but-easily-rotatable-api-key-across-the-fleet">Example: A shared, but easily rotatable, API key across the fleet</h2>

<p>In scenarios where you might require an API key to a 3rd party service for your applications. Let’s assume this is a non-critical service, weather service that looks up the temperature for given location (that is compared to the temperature from a sensor to calculate the temperature delta).</p>

<p>To do this, we login to the WoTT Dashboard. On the left of WoTT Dashboard you can see a section called “Credentials”. Click on it.</p>

<p><img alt="WoTT Dashboard sidebar" class="img-fluid" src="https://wott.io/assets/docs/sidebar-990e2a349f1f2c209e2c0665cafbc5181c4cfbdda747f1da414a9359478d596f.png" integrity="sha256-mQ4qNJ8fLCCeLAZlyvvFGBxM+92nR/HaQUqTWUeNWW8=" crossorigin="anonymous" srcset="https://wott.io/assets/826b17-b1cf51c76184a33f1883f92a26c5ac12bfff6d19c002656fba5f8c46336801f7.png 2x, https://wott.io/assets/8d71e4-68f3d57ea7af05431a2ebf268a5602e7bb03c73ef747e1d025188c545fdc6dbf.png 1x" /></p>

<p>Select ‘Add a credential’</p>

<p><img alt="WoTT Credentias menu" class="img-fluid" src="https://wott.io/assets/docs/credentials-d274913218b0056aea6b77c97d62819c50916e6e5a339de8f0dfb34f50160e9c.png" integrity="sha256-0nSRMhiwBWrqa3fJfWKBnFCRbm5aM53o8N+zT1AWDpw=" crossorigin="anonymous" srcset="https://wott.io/assets/bb6bdc-e65009c6742c6800bb316d2ee6e213c78e3126931f3ac5aa4cde798fd3cc046a.png 2x, https://wott.io/assets/4a0ef6-8b9cb280d390ca2884e53d0d63c8f03252943593578a9c4c92fec5e3d625aba1.png 1x" /></p>

<p>Let’s break down the fields:</p>

<ul>
  <li><strong>Name:</strong> name of credential file, for example <code class="highlighter-rouge">my_app</code>.</li>
  <li><strong>Key:</strong> contents of credential, for example: <code class="highlighter-rouge">api_key</code>.</li>
  <li><strong>Value:</strong> actual value of the login/key required for access (the bit that should be hidden).</li>
  <li><strong>Owner:</strong> optional field, recommended for Raspberry Pis. The owner is the Linux user that will own the file on the system. On Raspberry Pi, the default user is <code class="highlighter-rouge">pi</code>.</li>
  <li><strong>Tags:</strong> must match the tags on the device that you are downloading to, such as ‘my-app’</li>
</ul>

<p>This should now be accessible on any device with the tag that you added. The agent will periodically fetch these credentials. To speed things up, you can run the command <code class="highlighter-rouge">sudo wott-agent credentials</code> when you are testing this out.</p>

<p>With the credentials synced, you should be able to find all credentials in the folder <code class="highlighter-rouge">/opt/wott/credentials/$USERNAME/$NAME.json</code>. To reveal the API key we generated above, simply run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat /opt/wott/credentials/pi/my_app.json
{
    "api_key": "abc123"
}
</code></pre></div></div>

<p>All we now need to do in our application is to instead of hardcoding the credentials in our application, we read them from the above JSON file. In most programming languages, this would merely require a few lines of code.</p>

<h2 id="example-unique-keys-per-devices">Example: Unique keys per devices</h2>

<p>In the above example, we used tags to assign a shared key to one or more devices in a fleet. In a perfect world, you’d have individual credentials for each device. WoTT enables you to do this too. We call this “Device Metadata”. You can find this configuration if you navigate to a device and select the “Metadata” tab. You can then create as many per-device keys as you want. These can be anything from configuration values, to credentials.</p>

<p>If we for instance create a new key-value pair “Hello: World”, we can read this back much as we did above:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo cat /opt/wott/device_metadata.json
{
    "manufacturer": "Raspberry Pi",
    "Hello": "World",
    "model-decoded": "Zero v1.2",
    "device-name": "My Device",
    "model": "900092",
    "device_id": "x.d.wott.local"
}
</code></pre></div></div>

<p>As you can see above, we automatically populate this file with some handy meta data that you might want want to use as part of your application logic. It is however worth noting that the device metadata does not have the same granularity of permission access control, as it is locked down to “root” in order to avoid accidental leakage.</p>

<p>Please do note that if you want to speed up a sync, you need to use the command <code class="highlighter-rouge">sudo wott-agent device-metadata</code>.</p>

</div>

</div>


	</div>
    <script  src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
	<script  src="https://wott.io/assets/js/jquery.touchSwipe.min.js"></script>
	<script  src="https://wott.io/assets/js/main.js"></script>
    <!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
function clickview(idview){$(idview).bind('click',function(e){var b=$(this), name=b.text(), h_from=window.location.href, h_to=false, prt=b.parent(); if(b[0].nodeName=='A'){if(b.attr('href')!==undefined){var h_to=b.attr('href');}; if(b.attr('ga-track-href')!==undefined){var h_to=b.attr('ga-track-href');};}; if(prt[0].nodeName=='FORM'){function insertinform(o){var dt=[]; o.each(function(index){var inp=$(this).children(index); if(inp.attr('name')!==undefined && inp.val()!==undefined){dt.push(inp.attr('name')+'='+inp.val());}}); return dt;}; var h_to=prt.attr('action')+'?'+insertinform(prt).join('&');}; if(b.attr('ga-track-name')!==undefined){var name=b.attr('ga-track-name');}; ga('send', 'event', 'clickbutton',name, 'click_from:'+h_from+', click_to:'+h_to); if(h_to!==false){setTimeout(function(){if(b[0].nodeName=='A'){if(b.attr('target')!==undefined){if(b.attr('target')!=='_blank'){window.open(h_to,'_self');}else{window.open(h_to);}}else{window.open(h_to,'_self');};}; if(b[0].nodeName=='BUTTON'){if(prt[0].nodeName=='FORM'){prt.submit();};};},10); return false;};});};
ga('create', 'UA-134852372-1', 'auto'); ga('send', 'pageview'); clickview('[ga-clv="1"]');
</script>
<!-- End Google Analytics -->

<!-- start Mixpanel --><script type="text/javascript">(function(c,a){if(!a.__SV){var b=window;try{var d,m,j,k=b.location,f=k.hash;d=function(a,b){return(m=a.match(RegExp(b+"=([^&]*)")))?m[1]:null};f&&d(f,"state")&&(j=JSON.parse(decodeURIComponent(d(f,"state"))),"mpeditor"===j.action&&(b.sessionStorage.setItem("_mpcehash",f),history.replaceState(j.desiredHash||"",c.title,k.pathname+k.search)))}catch(n){}var l,h;window.mixpanel=a;a._i=[];a.init=function(b,d,g){function c(b,i){var a=i.split(".");2==a.length&&(b=b[a[0]],i=a[1]);b[i]=function(){b.push([i].concat(Array.prototype.slice.call(arguments,
0)))}}var e=a;"undefined"!==typeof g?e=a[g]=[]:g="mixpanel";e.people=e.people||[];e.toString=function(b){var a="mixpanel";"mixpanel"!==g&&(a+="."+g);b||(a+=" (stub)");return a};e.people.toString=function(){return e.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<l.length;h++)c(e,l[h]);var f="set set_once union unset remove delete".split(" ");e.get_group=function(){function a(c){b[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));e.push([d,call2])}}for(var b={},d=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<f.length;c++)a(f[c]);return b};a._i.push([b,d,g])};a.__SV=1.2;b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===c.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}})(document,window.mixpanel||[]);
</script><!-- end Mixpanel -->
<script type="text/javascript" src="https://wott.io/assets/js/mixpanel-track.js"></script>
</body>
</html>